<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>USACO 2017 Feb Gold Analysis | Yutian’s Blog</title>
<meta name="generator" content="Jekyll v3.9.4" />
<meta property="og:title" content="USACO 2017 Feb Gold Analysis" />
<meta name="author" content="Yutian Chen" />
<meta property="og:locale" content="en" />
<meta name="description" content="Problem 1. Why did the Cow Cross the Road Problem Description Bessie the cow wants to move from the upper-left corner of field to the bottom-right corner of field. Each time it goes from one grid to the other, $T$ unit of time will be consumed. Each time Bessie pass through 3 grids, she will stop at the grid and begin eating. The time of eating in each grid is different and will be provided in the input. $3 \leq N \leq 100, 0\leq T\leq 1\times 10^6$" />
<meta property="og:description" content="Problem 1. Why did the Cow Cross the Road Problem Description Bessie the cow wants to move from the upper-left corner of field to the bottom-right corner of field. Each time it goes from one grid to the other, $T$ unit of time will be consumed. Each time Bessie pass through 3 grids, she will stop at the grid and begin eating. The time of eating in each grid is different and will be provided in the input. $3 \leq N \leq 100, 0\leq T\leq 1\times 10^6$" />
<meta property="og:site_name" content="Yutian’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-26T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="USACO 2017 Feb Gold Analysis" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yutian Chen"},"dateModified":"2020-11-26T00:00:00+00:00","datePublished":"2020-11-26T00:00:00+00:00","description":"Problem 1. Why did the Cow Cross the Road Problem Description Bessie the cow wants to move from the upper-left corner of field to the bottom-right corner of field. Each time it goes from one grid to the other, $T$ unit of time will be consumed. Each time Bessie pass through 3 grids, she will stop at the grid and begin eating. The time of eating in each grid is different and will be provided in the input. $3 \\leq N \\leq 100, 0\\leq T\\leq 1\\times 10^6$","headline":"USACO 2017 Feb Gold Analysis","mainEntityOfPage":{"@type":"WebPage","@id":"/algorithm/2020/11/26/USACO-2017-Feb-Gold.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/logo.png"},"name":"Yutian Chen"},"url":"/algorithm/2020/11/26/USACO-2017-Feb-Gold.html"}</script>
<!-- End Jekyll SEO tag -->


<link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Yutian's Blog" />





<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open%20Sans|Roboto|Roboto%20Slab|Inconsolata|Dancing%20Script|Noto%20Sans%20SC|Noto%20Sans%20TC|Noto%20Serif%20SC|Noto%20Serif%20TC|Ma%20Shan%20Zheng">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/skin.css">

<!-- Begin selecting skin -->

  <script>
    const hour = (new Date()).getHours();
    let filename = "";
    if (hour >= 5 && hour < 20) {
      filename = "/assets/css/skin-daylight.css";
    } else {
      filename = "/assets/css/skin-daylight.css";
    }
    const elem = document.createElement("link");
    elem.setAttribute("rel", "stylesheet");
    elem.setAttribute("type", "text/css");
    elem.setAttribute("href", filename);
    document.getElementsByTagName("head")[0].appendChild(elem);
  </script>

<!-- End selecting skin -->

<!-- <script async src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



<!-- MathJax used to render math equations -->
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<!-- MS Clarity -->
<script type="text/javascript">
  (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "eo4n22qg7z");
</script>


  </head>

  <body>
    <div class="site-container">
      <header class="site-header">
        <div class="wrapper">
  <script>
    function clickSidebarButton() {
      const elem = document.getElementById("site-sidebar")
      if (elem.style.display == "none" || elem.style.display == "") {
        elem.style.display = "block";
      } else {
        elem.style.display = "none";
      }
    }
  </script>
  <a class="site-sidebar-button" onclick="clickSidebarButton()"><i class="fa fa-user-circle"></i>
  </a>

  <a class="site-title" rel="author" href="/">Yutian&#39;s Blog</a>

  
    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger" title="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <ul class="trigger">
              <li><a class="" href="/about/">About</a></li>
            
              <li><a class="" href="/categories/">Posts</a></li>
            
              <li><a class="" href="/files/">Files</a></li>
            
              <li class="dropdown" href="#">
                <a href="javascript:void(0)" class="dropbtn">More</a>
                <div class="dropdown-content">
                    <a class="" href="/tags/">Tags</a>
                    <a class="" href="/years/">Years</a>
                </div>
              </li>
            </ul>
    </nav>
  
</div>

      </header>
      
      <div class="site-body wrapper">
        <aside class="site-sidebar" id="site-sidebar">
          
            <div class="sidebar-section"><img src="/avatar.jpg" class="author-avatar u-photo align-center" alt="Yutian Chen">
  </div>

<div class="sidebar-section">
  <ul class="contact-list">
    <li>
        <i class="sidebar-icon fa fa-at"></i>
        <span class="contact-info p-name">Yutian Chen</span>
      </li>
    <li>
        <i class="sidebar-icon fa fa-envelope-o"></i>
        <a class="contact-info u-email" href="mailto:yutianch@andrew.cmu.edu">yutianch@andrew.cmu.edu</a>
      </li>
    <li>
        <i class="sidebar-icon fa fa-location-arrow"></i>
        <a class="contact-info u-location" href="https://www.google.com/maps/search/Pittsburgh, PA">Pittsburgh, PA</a>
      </li>
  </ul>
</div>

<div class="sidebar-section feed-subscribe">
  <a href="feed.xml">
    <i class="sidebar-icon fa fa-rss"></i><span>Subscribe</span>
  </a>
</div>

<div class="sidebar-section">
    <ul class="social-icons">
      <li>
          <a class="social-icon" href="https://www.linkedin.com/in/yutian-chen-469602223/"><i class="fa fa-linkedin-square fa-2x" title="LinkedIn"></i></a>
        </li><li>
          <a class="social-icon" href="https://github.com/MarkChenYutian"><i class="fa fa-github-square fa-2x" title="GitHub"></i></a>
        </li>
    </ul>
  </div>

          
        </aside>
        <main class="site-main" id="site-main" aria-label="Content" tabindex="1">
          <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">

    <h1 class="post-title p-name" itemprop="name headline">USACO 2017 Feb Gold Analysis</h1>
    <p class="post-meta"><time class="dt-published" datetime="2020-11-26T00:00:00+00:00" itemprop="datePublished">
        Nov 26, 2020
      </time></p>

  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="problem-1-why-did-the-cow-cross-the-road">Problem 1. Why did the Cow Cross the Road</h2>

<h3 id="problem-description">Problem Description</h3>

<p>Bessie the cow wants to move from the upper-left corner of field to the bottom-right corner of field. Each time it goes from one grid to the other, <em>$T$ unit</em> of time will be consumed. Each time Bessie pass through 3 grids, she will stop at the grid and begin eating. The time of eating in each grid is different and will be provided in the input.</p>

<p>$3 \leq N \leq 100, 0\leq T\leq 1\times 10^6$</p>

<!--more-->

<h3 id="proposed-solution">Proposed Solution</h3>

<p>The first thought on this problem is to solve by using <strong>Unified Cost Search (UCS)</strong>. By maintain a fringe of Priority Queue that is sorted according to the time consumes to arrive at a specific position, it is promised that the first state we have met that arrived at the destination will be the state that consumes LEAST time to arrive at the destination.</p>

<p>Therefore, we can represent a State $S$ in this form</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">State</span> <span class="n">newState</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">State</span><span class="o">(</span><span class="nc">Time</span><span class="o">,</span> <span class="n">num</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
</code></pre></div></div>

<p>And accordingly, the state transition function will be somehow like this</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">State</span><span class="o">&gt;</span> <span class="nf">StateTransition</span><span class="o">(</span><span class="nc">State</span> <span class="n">currState</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">currTime</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getNum</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">currX</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getX</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">currY</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">gety</span><span class="o">();</span>
    
    <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">State</span><span class="o">&gt;</span> <span class="n">nextStates</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    
    <span class="nc">Move</span><span class="o">[]</span> <span class="n">validMove</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getValidMove</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Move</span> <span class="n">move</span> <span class="o">:</span> <span class="n">validMove</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">nextTime</span> <span class="o">=</span> <span class="n">currTime</span><span class="o">;</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">change</span> <span class="o">=</span> <span class="n">move</span><span class="o">.</span><span class="na">getChange</span><span class="o">();</span>
        <span class="n">nextX</span> <span class="o">=</span> <span class="n">currX</span> <span class="o">+</span> <span class="n">change</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="n">nextY</span> <span class="o">=</span> <span class="n">currY</span> <span class="o">+</span> <span class="n">change</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="o">){</span> <span class="n">nextTime</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">Time</span><span class="o">[</span><span class="n">nextX</span><span class="o">][</span><span class="n">nextY</span><span class="o">]</span> <span class="o">}</span>
        <span class="n">nextStates</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">State</span><span class="o">(</span><span class="n">nextTime</span><span class="o">,</span> <span class="n">num</span><span class="o">,</span> <span class="n">nextX</span><span class="o">,</span> <span class="n">nextY</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="not-a-pure-ucs">*NOT a Pure UCS</h3>

<p>Specifically, in this question, Bessie can access the field that she has already accessed to avoid eating grass on a field that is extremely time consuming. Therefore, we <strong>should not</strong> use a <code class="language-plaintext highlighter-rouge">HashMap</code> object to exclude the explored states simply.</p>

<p>However, not using a set to exclude visited state will lead to EXTREMELY LARGE FRINGE. Suppose there exist a field where the time required to eat grass is $T$, while all other fields requires $30T$ time to eat grass.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>30T 30T 30T 30T ... 30T
30T T 30T 30T ...30T
30T 30T 30T 30T ... 30T
...
30T 30T 30T 30T ... 30T
</code></pre></div></div>

<p>In this case, the pure UCS algorithm without excluding repeated state will explore the field with time $T$ repeatedly for 30 times (after 30 times, the state (1, 1) is not on the top of PQ), which will build a tree with <strong>height of 30</strong> before exploring other states. Since each state can have 4 transition states on average, the fringe will have a size of approx $4^{30}$! This will definitely lead to TLE and we need pruning.</p>

<p>Reconsider the state, we can know that each state is defined by two variables - <strong>Position</strong> and <strong>Number of State transition % 3</strong>. Therefore, we can construct an array $T_{rec}$ with size $N\times N\times 3$, where $T_{rec}[x][y][i]$ represents the <strong>minimum time</strong> it takes for Bessie to get to position (x, y) with step remainder of $i$ (somehow similar to Dynamic Programming). If a new state we get from <code class="language-plaintext highlighter-rouge">getTransitionStates</code> has the same <code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">y</code>, and <code class="language-plaintext highlighter-rouge">i</code>  with more time, we should simply discard it and does not add it into the fringe.</p>

<h3 id="time-complexity-analysis">Time Complexity Analysis</h3>

<p>Since the time that UCS iterate is not bounded explicitly and there does not has an explicit relationship between data scale and number of iteration, it is hard to calculate accurate time complexity. Below, we will try to estimate an upper bound.</p>

<p>First, there are $N^2$ vertexes in the graph, suppose each node is explored for $N$ time (which is an over-estimation), the time complexity of travel through the graph using UCS is $O(N^3)$. Since each state is push and pop from a priority queue that is maintained using binary heap, the time complexity of push &amp; pop one state is $O(\log n)$. The overall time complexity should be less than $O(N^3 \log(n))$.</p>

<p>Since $3\leq N\leq 100$, the time complexity of $O(N^3 \log{n})$ is acceptable.</p>

<p><img src="https://markdown-img-1304853431.file.myqcloud.com/image-20201127082824022.png" alt="image-20201127082824022" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">USACO2017FebGold1</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">{</span>
        <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="s">"visitfj.in"</span><span class="o">));</span>
        <span class="nc">PrintWriter</span> <span class="n">pr</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">BufferedWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileWriter</span><span class="o">(</span><span class="s">"visitfj.out"</span><span class="o">)));</span>

        <span class="c1">// Read N and T</span>
        <span class="nc">StringTokenizer</span> <span class="n">st</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringTokenizer</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="kt">int</span> <span class="no">N</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>
        <span class="kt">int</span> <span class="no">T</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>

        <span class="kt">int</span><span class="o">[][]</span> <span class="n">grid</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="no">N</span><span class="o">][</span><span class="no">N</span><span class="o">];</span>
        <span class="kt">int</span><span class="o">[][][]</span> <span class="n">timeRec</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="no">N</span><span class="o">][</span><span class="no">N</span><span class="o">][</span><span class="mi">3</span><span class="o">];</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">;</span> <span class="n">x</span> <span class="o">++){</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">;</span> <span class="n">y</span> <span class="o">++){</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">z</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">;</span> <span class="n">z</span> <span class="o">++){</span>
                    <span class="n">timeRec</span><span class="o">[</span><span class="n">x</span><span class="o">][</span><span class="n">y</span><span class="o">][</span><span class="n">z</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">;</span> <span class="n">i</span> <span class="o">++){</span>
            <span class="n">st</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringTokenizer</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">;</span> <span class="n">j</span> <span class="o">++){</span> <span class="n">grid</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span> <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// Unified Cost Search</span>
        <span class="c1">// int leastTimeResult = -1;</span>
        <span class="nc">PriorityQueue</span><span class="o">&lt;</span><span class="nc">State</span><span class="o">&gt;</span> <span class="n">fringe</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PriorityQueue</span><span class="o">&lt;&gt;();</span>
        <span class="n">fringe</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">State</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">));</span>

        <span class="k">while</span> <span class="o">(!</span><span class="n">fringe</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()){</span>
            <span class="nc">State</span> <span class="n">currState</span> <span class="o">=</span> <span class="n">fringe</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="cm">/*if (currState.getX() == N - 1 &amp;&amp; currState.getY() == N - 1){
                leastTimeResult = currState.getTime();
                break; // currState is the first state at destination, and is the one that use least time
                // STOP further searching
            }*/</span>

            <span class="k">for</span> <span class="o">(</span><span class="nc">State</span> <span class="n">nextState</span> <span class="o">:</span> <span class="n">getTransitionState</span><span class="o">(</span><span class="n">currState</span><span class="o">,</span> <span class="no">N</span><span class="o">,</span> <span class="no">T</span><span class="o">,</span> <span class="n">grid</span><span class="o">)){</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">isBetterSolution</span><span class="o">(</span><span class="n">nextState</span><span class="o">,</span> <span class="n">timeRec</span><span class="o">)){</span>
                    <span class="n">fringe</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nextState</span><span class="o">);</span>
                    <span class="n">timeRec</span><span class="o">[</span><span class="n">nextState</span><span class="o">.</span><span class="na">getX</span><span class="o">()][</span><span class="n">nextState</span><span class="o">.</span><span class="na">getY</span><span class="o">()][</span><span class="n">nextState</span><span class="o">.</span><span class="na">getNum</span><span class="o">()%</span><span class="mi">3</span><span class="o">]</span> <span class="o">=</span> <span class="n">nextState</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kt">int</span> <span class="n">leastTimeResult</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">timeRec</span><span class="o">[</span><span class="no">N</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="no">N</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="mi">0</span><span class="o">],</span> <span class="n">timeRec</span><span class="o">[</span><span class="no">N</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="no">N</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="mi">1</span><span class="o">]);</span>
        <span class="n">leastTimeResult</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">leastTimeResult</span><span class="o">,</span> <span class="n">timeRec</span><span class="o">[</span><span class="no">N</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="no">N</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="mi">2</span><span class="o">]);</span>

        <span class="n">pr</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">leastTimeResult</span><span class="o">);</span>


        <span class="c1">// Close Buffered Reader &amp; Writer to prevent memory leak.</span>
        <span class="n">pr</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isBetterSolution</span><span class="o">(</span><span class="nc">State</span> <span class="n">nextState</span><span class="o">,</span> <span class="kt">int</span><span class="o">[][][]</span> <span class="n">timeRec</span><span class="o">){</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">nextState</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">timeRec</span><span class="o">[</span><span class="n">nextState</span><span class="o">.</span><span class="na">getX</span><span class="o">()][</span><span class="n">nextState</span><span class="o">.</span><span class="na">getY</span><span class="o">()][</span><span class="n">nextState</span><span class="o">.</span><span class="na">getNum</span><span class="o">()%</span><span class="mi">3</span><span class="o">]);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">State</span><span class="o">&gt;</span> <span class="nf">getTransitionState</span><span class="o">(</span><span class="nc">State</span> <span class="n">currState</span><span class="o">,</span> <span class="kt">int</span> <span class="no">N</span><span class="o">,</span> <span class="kt">int</span> <span class="no">T</span><span class="o">,</span> <span class="kt">int</span><span class="o">[][]</span> <span class="n">grid</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">currTime</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span> <span class="kt">int</span> <span class="n">nextNum</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getNum</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">currX</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getX</span><span class="o">();</span> <span class="kt">int</span> <span class="n">currY</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getY</span><span class="o">();</span>
        <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">validMoves</span> <span class="o">=</span> <span class="n">getValidMoves</span><span class="o">(</span><span class="n">currState</span><span class="o">,</span> <span class="no">N</span><span class="o">);</span>
        <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">State</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">move</span> <span class="o">:</span> <span class="n">validMoves</span><span class="o">){</span>
            <span class="kt">int</span> <span class="n">nextTime</span> <span class="o">=</span> <span class="n">currTime</span><span class="o">;</span><span class="kt">int</span> <span class="n">nextX</span><span class="o">;</span> <span class="kt">int</span> <span class="n">nextY</span><span class="o">;</span>
            <span class="k">switch</span> <span class="o">(</span><span class="n">move</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">case</span> <span class="s">"L"</span><span class="o">:</span>
                    <span class="n">nextX</span> <span class="o">=</span> <span class="n">currX</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span><span class="n">nextY</span> <span class="o">=</span> <span class="n">currY</span><span class="o">;</span><span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="s">"R"</span><span class="o">:</span>
                    <span class="n">nextX</span> <span class="o">=</span> <span class="n">currX</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span><span class="n">nextY</span> <span class="o">=</span> <span class="n">currY</span><span class="o">;</span><span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="s">"U"</span><span class="o">:</span>
                    <span class="n">nextX</span> <span class="o">=</span> <span class="n">currX</span><span class="o">;</span><span class="n">nextY</span> <span class="o">=</span> <span class="n">currY</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span><span class="k">break</span><span class="o">;</span>
                <span class="k">default</span><span class="o">:</span>
                    <span class="n">nextX</span> <span class="o">=</span> <span class="n">currX</span><span class="o">;</span><span class="n">nextY</span> <span class="o">=</span> <span class="n">currY</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span><span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">nextNum</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="n">nextTime</span> <span class="o">+=</span> <span class="n">grid</span><span class="o">[</span><span class="n">nextX</span><span class="o">][</span><span class="n">nextY</span><span class="o">];</span>
            <span class="n">nextTime</span> <span class="o">+=</span> <span class="no">T</span><span class="o">;</span>
            <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">State</span><span class="o">(</span><span class="n">nextTime</span><span class="o">,</span> <span class="n">nextNum</span><span class="o">,</span> <span class="n">nextX</span><span class="o">,</span> <span class="n">nextY</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getValidMoves</span><span class="o">(</span><span class="nc">State</span> <span class="n">currState</span><span class="o">,</span> <span class="kt">int</span> <span class="no">N</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getX</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">currState</span><span class="o">.</span><span class="na">getY</span><span class="o">();</span>
        <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"L"</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">)</span> <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"R"</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"U"</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">)</span> <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"D"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">State</span> <span class="kd">implements</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">State</span><span class="o">&gt;{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">time</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">num</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">State</span><span class="o">(</span><span class="kt">int</span> <span class="n">time</span><span class="o">,</span> <span class="kt">int</span> <span class="n">num</span><span class="o">,</span> <span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">time</span> <span class="o">=</span> <span class="n">time</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">num</span> <span class="o">=</span> <span class="n">num</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getTime</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">time</span><span class="o">;</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getNum</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">num</span><span class="o">;</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getX</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span><span class="o">;</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getY</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">y</span><span class="o">;</span> <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">State</span> <span class="n">otherState</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">time</span> <span class="o">-</span> <span class="n">otherState</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
        <span class="c1">//return (otherState.getX() * otherState.getY() - this.x * this.y);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">(){</span> <span class="k">return</span> <span class="s">"( "</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">+</span> <span class="s">" ), num"</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">num</span> <span class="o">+</span> <span class="s">""</span><span class="o">;</span> <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">(){</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">*</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span><span class="o">;</span> <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">o</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="o">(</span><span class="nc">State</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="n">state</span><span class="o">.</span><span class="na">x</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">==</span> <span class="n">state</span><span class="o">.</span><span class="na">y</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="problem-2-why-did-the-cow-cross-the-road-ii">Problem 2. Why Did the Cow Cross the Road II</h2>

<h3 id="problem-description-1">Problem Description</h3>

<p>John have $N$ breeds of cows and $N$ pastures on both sides of the road separately. Now, all the cows will move from one side of road to the other side. Each breed has a specific ID. Only if the difference of two breed’s IDs are smaller than 4, that two breeds will be “friendly” to each other.</p>

<p>Given that each pasture can only have at most one link with another pasture on the other side of road and no links can cross over each other, what is the maximum number of links that can be draw between pastures?</p>

<h3 id="proposed-solution-1">Proposed Solution</h3>

<p>In this problem, we are in fact finding out maximized number of valid pairs on both side of pasture. Suppose the last (right most link) between the pastures are $(a, b)$, where $a$ represent the $a^{th}$ pasture on upper row and $b$ represent the $b^{th}$ pasture in the lower row. We can notice that the links that is on the left of $(a, b)$ will not affect the links on the right of $(a, b)$.</p>

<p>Therefore, we can use dynamic programming to solve this problem. Build up a table $T$ of size $N\times N$, $T[a][b]$ represent the maximum number of links that can be build on the left of $(a, b)$.</p>

<h3 id="time-complexity-analysis-1">Time Complexity Analysis</h3>

<p>The total time complexity of this solution is $O(N^2)$. Since $0\leq N \leq 1000$, the problem can be finished in 4 seconds.</p>

<h2 id="problem-3-why-did-the-cow-cross-the-road-iii">Problem 3. Why Did the Cow Cross the Road III</h2>

<h3 id="problem-description-2">Problem Description</h3>

<p>The pasture of John’s farm is circular and there are $2N$ points to get in / out of the pasture. Everyday, $N$ cows will go in and out from different door and every door is only used by one cow once (either in / out). Now, John have collected all the in &amp; out doors of the cows. He wants to know the number pairs that will “cross over”.</p>

<blockquote>
  <p>For instance, if a cow get in from $1$ and get out from $3$ while the other cow get in from $2$ and out of $4$, they will “cross over”.</p>
</blockquote>

<h3 id="proposed-solution-2">Proposed Solution</h3>

<p>We can use a <a href="https://markyutianchen.gitee.io/react-app-test/#/posts/BinaryIndexTree">Binary Index Tree</a> here to solve the problem.</p>

<p>First, we will construct a Binary Index Tree with length $2N$ and initialized with 0. Then, we will loop on the possible in/out gates. When we have passed through one point, we should do these things:</p>

<ol>
  <li>Check if we have passed through a point that belongs to same breed before
    <ol>
      <li>If yes, update the Binary Index tree to change both current index and the position of previous gate of same breed to 0. Calculate the sum of BIT in range $(\text{previous gate}, \text{current gate})$.</li>
      <li>If not, update the Binary Index tree to change value on current index from 0 to 1.</li>
    </ol>
  </li>
</ol>

<p><img src="https://markdown-img-1304853431.file.myqcloud.com/image-20201209111059796.png" alt="image-20201209111059796" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">USACO2017FebGold3</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">{</span>
        <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="s">"circlecross.in"</span><span class="o">));</span>
        <span class="nc">PrintWriter</span> <span class="n">pr</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileWriter</span><span class="o">(</span><span class="s">"circlecross.out"</span><span class="o">));</span>

        <span class="kt">int</span> <span class="no">N</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">cowInfo</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">2</span> <span class="o">*</span> <span class="no">N</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">++){</span> <span class="n">cowInfo</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span> <span class="o">}</span>

        <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">positionRec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="no">BIT</span> <span class="n">rec</span> <span class="o">=</span> <span class="k">new</span> <span class="no">BIT</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">2</span> <span class="o">*</span> <span class="no">N</span><span class="o">]);</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">++){</span>
            <span class="kt">int</span> <span class="n">breed</span> <span class="o">=</span> <span class="n">cowInfo</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">positionRec</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">breed</span><span class="o">)){</span>
                <span class="n">rec</span><span class="o">.</span><span class="na">updatePoint</span><span class="o">(</span><span class="n">positionRec</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">breed</span><span class="o">),</span> <span class="mi">0</span><span class="o">);</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="n">rec</span><span class="o">.</span><span class="na">getSum</span><span class="o">(</span><span class="n">positionRec</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">breed</span><span class="o">),</span> <span class="n">i</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">else</span><span class="o">{</span>
                <span class="n">positionRec</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">breed</span><span class="o">,</span> <span class="n">i</span><span class="o">);</span>
                <span class="n">rec</span><span class="o">.</span><span class="na">updatePoint</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">pr</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>

        <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="n">pr</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="time-complexity-analysis-2">Time Complexity Analysis</h3>

<p>Since the update and calculation of range sum on BIT only have a time complexity of $O(\log{n})$ , the over all time complexity will be $O(n\log{n})$.</p>

<p>Since $1\leq n \leq 50000$, this time complexity is acceptable.</p>

  </div>

  <footer class="post-footer">
    
      <div class="post-meta">
        <i class="fa fa-folder-o"></i>
        <ul class="post-taxonomies post-categories">
          
          
            <li class="post-category">
              
              <a href="/categories/#algorithm">Algorithm</a>
            </li>
          
        </ul>
      </div>
    

    
      <div class="post-meta">
        <i class="fa fa-tags"></i>
        <ul class="post-taxonomies post-tags">
          
          
            <li class="post-tag">
              
              <a href="/tags/#algorithm">algorithm</a>
            </li>
          
        </ul>
      </div>
    

    <nav class="post-pagination" role="navigation">
      
        <a class="post-previous" href="/algorithm/2020/11/13/Binary-Index-Tree.html">
          <h4 class="post-pagination-label">Prev</h4>
          <span class="post-pagination-title">
            <i class="fa fa-arrow-left"></i> Binary Index Tree (Fenwick Tree)

          </span>
        </a>
      

      
        <a class="post-next" href="/algorithm/2020/12/10/USACO-2017-Dec-Gold.html">
          <h4 class="post-pagination-label">Next</h4>
          <span class="post-pagination-title">
            USACO 2017 Dec Gold Analysis
 <i class="fa fa-arrow-right"></i>
          </span>
        </a>
      
    </nav>
  </footer>

  
  
</article>

          <footer class="site-footer">
            <div class="footer-col-wrapper">

  <div class="footer-col">
    <div class="copyright">
      
      
      
      
      <p>Copyright © 2019&nbsp;-&nbsp;2024 Yutian Chen</p>
      
    </div>
    <p>
      Build Version: 08 Jan 2024
    </p>
  </div>

  <div class="footer-col">
    <p>A place for me to Learn, Create and Share</p>
  </div>
</div>

          </footer>
        </main>
      </div>
    </div>
  </body>

</html>
